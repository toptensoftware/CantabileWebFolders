(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Cantabile=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){var objectCreate=Object.create||objectCreatePolyfill;var objectKeys=Object.keys||objectKeysPolyfill;var bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){if(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events")){this._events=objectCreate(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;var hasDefineProperty;try{var o={};if(Object.defineProperty)Object.defineProperty(o,"x",{value:0});hasDefineProperty=o.x===0}catch(err){hasDefineProperty=false}if(hasDefineProperty){Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||arg!==arg)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=arg}})}else{EventEmitter.defaultMaxListeners=defaultMaxListeners}EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};function emitNone(handler,isFn,self){if(isFn)handler.call(self);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self)}}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1)}}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2)}}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3)}}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].apply(self,args)}}EventEmitter.prototype.emit=function emit(type){var er,handler,len,args,i,events;var doError=type==="error";events=this._events;if(events)doError=doError&&events.error==null;else if(!doError)return false;if(doError){if(arguments.length>1)er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Unhandled "error" event. ('+er+")");err.context=er;throw err}return false}handler=events[type];if(!handler)return false;var isFn=typeof handler==="function";len=arguments.length;switch(len){case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];emitMany(handler,isFn,this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');events=target._events;if(!events){events=target._events=objectCreate(null);target._eventsCount=0}else{if(events.newListener){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(!existing){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else{if(prepend){existing.unshift(listener)}else{existing.push(listener)}}if(!existing.warned){m=$getMaxListeners(target);if(m&&m>0&&existing.length>m){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+' "'+String(type)+'" listeners '+"added. Use emitter.setMaxListeners() to "+"increase limit.");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;if(typeof console==="object"&&console.warn){console.warn("%s: %s",w.name,w.message)}}}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;switch(arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:var args=new Array(arguments.length);for(var i=0;i<args.length;++i)args[i]=arguments[i];this.listener.apply(this.target,args)}}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=bind.call(onceWrapper,state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');events=this._events;if(!events)return this;list=events[type];if(!list)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=objectCreate(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else spliceOne(list,position);if(list.length===1)events[type]=list[0];if(events.removeListener)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(!events)return this;if(!events.removeListener){if(arguments.length===0){this._events=objectCreate(null);this._eventsCount=0}else if(events[type]){if(--this._eventsCount===0)this._events=objectCreate(null);else delete events[type]}return this}if(arguments.length===0){var keys=objectKeys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=objectCreate(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(!events)return[];var evlistener=events[type];if(!evlistener)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function objectCreatePolyfill(proto){var F=function(){};F.prototype=proto;return new F}function objectKeysPolyfill(obj){var keys=[];for(var k in obj)if(Object.prototype.hasOwnProperty.call(obj,k)){keys.push(k)}return k}function functionBindPolyfill(context){var fn=this;return function(){return fn.apply(context,arguments)}}},{}],2:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],3:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EndPoint=require("./EndPoint");var Application=function(_EndPoint){(0,_inherits3.default)(Application,_EndPoint);function Application(owner){(0,_classCallCheck3.default)(this,Application);return(0,_possibleConstructorReturn3.default)(this,(Application.__proto__||Object.getPrototypeOf(Application)).call(this,owner,"/api/application"))}(0,_createClass3.default)(Application,[{key:"_onOpen",value:function _onOpen(){this.emit("busyChanged",this.busy);this.emit("changed")}},{key:"_onClose",value:function _onClose(){this.emit("busyChanged",this.busy);this.emit("changed")}},{key:"_onEvent_busyChanged",value:function _onEvent_busyChanged(data){this._data.busy=data.busy;this.emit("busyChanged",this.busy)}},{key:"companyName",get:function get(){return this._data?this._data.companyName:null}},{key:"name",get:function get(){return this._data?this._data.name:null}},{key:"version",get:function get(){return this._data?this._data.version:null}},{key:"edition",get:function get(){return this._data?this._data.edition:null}},{key:"copyright",get:function get(){return this._data?this._data.copyright:null}},{key:"build",get:function get(){return this._data?this._data.build:null}},{key:"busy",get:function get(){return this._data?this._data.busy:false}}]);return Application}(EndPoint);module.exports=Application},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25}],4:[function(require,module,exports){"use strict";var _regenerator=require("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator");var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EndPoint=require("./EndPoint");var EventEmitter=require("events");var BindingWatcher=function(_EventEmitter){(0,_inherits3.default)(BindingWatcher,_EventEmitter);function BindingWatcher(owner,name,indicies,condition,listener){(0,_classCallCheck3.default)(this,BindingWatcher);var _this=(0,_possibleConstructorReturn3.default)(this,(BindingWatcher.__proto__||Object.getPrototypeOf(BindingWatcher)).call(this));_this.owner=owner;_this._name=name;_this._indicies=indicies;_this._condition=condition;_this._listener=listener;_this._value=null;return _this}(0,_createClass3.default)(BindingWatcher,[{key:"_start",value:function _start(){var _this2=this;this.owner.post("/watch",{name:this._name,indicies:this._indicies,condition:this._condition}).then(function(r){_this2.owner._registerWatchId(r.data.watchId,_this2);_this2._watchId=r.data.watchId;if(r.data.value!==null&&r.data.value!==undefined){_this2._value=r.data.value;_this2._fireInvoked()}})}},{key:"_stop",value:function _stop(){if(this.owner._epid&&this._watchId){this.owner.send("/unwatch",{watchId:this._watchId});this.owner._revokeWatchId(this._watchId);this._watchId=0;if(this._value!==null&&this._value!==undefined){this._value=null;this._fireInvoked()}}}},{key:"unwatch",value:function unwatch(){this._stop();this.owner._revokeWatcher(this)}},{key:"_update",value:function _update(data){this._value=data.value;this._fireInvoked()}},{key:"_fireInvoked",value:function _fireInvoked(){if(this._listener)this._listener(this._value,this);this.emit("invoked",this.value,this)}},{key:"name",get:function get(){return this._name}},{key:"indicies",get:function get(){return this._indicies}},{key:"condition",get:function get(){return this._condition}},{key:"value",get:function get(){return this._value}}]);return BindingWatcher}(EventEmitter);var Bindings=function(_EndPoint){(0,_inherits3.default)(Bindings,_EndPoint);function Bindings(owner){(0,_classCallCheck3.default)(this,Bindings);var _this3=(0,_possibleConstructorReturn3.default)(this,(Bindings.__proto__||Object.getPrototypeOf(Bindings)).call(this,owner,"/api/bindings"));_this3._watchers=[];_this3._watchIds={};return _this3}(0,_createClass3.default)(Bindings,[{key:"_onOpen",value:function _onOpen(){for(var i=0;i<this._watchers.length;i++){this._watchers[i]._start()}}},{key:"_onClose",value:function _onClose(){for(var i=0;i<this._watchers.length;i++){this._watchers[i]._stop()}}},{key:"availableBindingPoints",value:function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(){return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.owner.untilConnected();case 2:_context.next=4;return this.request("GET","/availableBindingPoints");case 4:return _context.abrupt("return",_context.sent.data);case 5:case"end":return _context.stop()}}},_callee,this)}));function availableBindingPoints(){return _ref.apply(this,arguments)}return availableBindingPoints}()},{key:"invoke",value:function(){var _ref2=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(name,value,indicies,parameter){return _regenerator2.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request("POST","/invoke",{name:name,value:value,indicies:indicies,parameter:parameter});case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}},_callee2,this)}));function invoke(_x,_x2,_x3,_x4){return _ref2.apply(this,arguments)}return invoke}()},{key:"query",value:function(){var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(name,indicies){return _regenerator2.default.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.request("POST","/query",{name:name,indicies:indicies});case 2:return _context3.abrupt("return",_context3.sent.data.value);case 3:case"end":return _context3.stop()}}},_callee3,this)}));function query(_x5,_x6){return _ref3.apply(this,arguments)}return query}()},{key:"watch",value:function watch(name,indicies,condition,listener){var w=new BindingWatcher(this,name,indicies,condition,listener);this._watchers.push(w);if(this.isOpen)w._start();return w}},{key:"_registerWatchId",value:function _registerWatchId(watchId,watcher){this._watchIds[watchId]=watcher}},{key:"_revokeWatchId",value:function _revokeWatchId(watchId){delete this._watchIds[watchId]}},{key:"_revokeWatcher",value:function _revokeWatcher(w){this._watchers=this._watchers.filter(function(x){return x!=w})}},{key:"_onEvent_invoked",value:function _onEvent_invoked(data){var w=this._watchIds[data.watchId];if(w){w._update(data)}}}]);return Bindings}(EndPoint);module.exports=Bindings},{"./EndPoint":6,"babel-runtime/helpers/asyncToGenerator":21,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":27,debug:120,events:1}],5:[function(require,module,exports){(function(process){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WebSocket=require("isomorphic-ws");var debug=require("debug")("Cantabile");var EventEmitter=require("events");var Cantabile=function(_EventEmitter){(0,_inherits3.default)(Cantabile,_EventEmitter);function Cantabile(socketUrl){(0,_classCallCheck3.default)(this,Cantabile);var _this=(0,_possibleConstructorReturn3.default)(this,(Cantabile.__proto__||Object.getPrototypeOf(Cantabile)).call(this));var defaultHost=process.browser?window.location.host:"localhost:35007";_this.socketUrl=socketUrl||`ws://${defaultHost}/api/socket/`;_this.shouldConnect=false;_this._nextRid=1;_this._pendingResponseHandlers={};_this._endPointEventHandlers={};_this._setState("disconnected");_this.setList=new(require("./SetList"))(_this);_this.songStates=new(require("./SongStates"))(_this);_this.keyRanges=new(require("./KeyRanges"))(_this);_this.showNotes=new(require("./ShowNotes"))(_this);_this.variables=new(require("./Variables"))(_this);_this.bindings=new(require("./Bindings"))(_this);_this.song=new(require("./Song"))(_this);_this.transport=new(require("./Transport"))(_this);_this.application=new(require("./Application"))(_this);return _this}(0,_createClass3.default)(Cantabile,[{key:"connect",value:function connect(){this.shouldConnect=true;this._internalConnect()}},{key:"disconnect",value:function disconnect(){this.shouldConnect=false;this._internalDisconnect()}},{key:"send",value:function send(obj){debug("SEND: %j",obj);this._ws.send(JSON.stringify(obj))}},{key:"request",value:function request(message){return new Promise(function(resolve,reject){message.rid=this._nextRid++;this._pendingResponseHandlers[message.rid]={message:message,resolve:resolve,reject:reject};this.send(message)}.bind(this))}},{key:"untilConnected",value:function untilConnected(){var _this2=this;if(this._state=="connected"){return Promise.resolve()}else{return new Promise(function(resolve,reject){if(!_this2.pendingConnectPromises)_this2.pendingConnectPromises=[resolve];else _this2.pendingConnectPromises.push(resolve)})}}},{key:"_setState",value:function _setState(value){if(this._state!=value){this._state=value;this.emit("stateChanged",value);this.emit(value);debug(value);if(this._state=="connected"){if(this.pendingConnectPromises){for(var i=0;i<this.pendingConnectPromises.length;i++){this.pendingConnectPromises[i]()}this.pendingConnectPromises=null}}}}},{key:"_internalConnect",value:function _internalConnect(){if(!this.shouldConnect)return;if(this._ws)return;this._setState("connecting");debug("Opening web socket '%s'",this.socketUrl);this._ws=new WebSocket(this.socketUrl);this._ws.onerror=this._onSocketError.bind(this);this._ws.onopen=this._onSocketOpen.bind(this);this._ws.onclose=this._onSocketClose.bind(this);this._ws.onmessage=this._onSocketMessage.bind(this)}},{key:"_internalDisconnect",value:function _internalDisconnect(){if(this.state=="connected")this._setState("disconnected");if(!this._ws)return;this._ws.close();delete this._ws}},{key:"_internalReconnect",value:function _internalReconnect(){if(this.shouldConnect&&!this.timeoutPending){this.timeoutPending=true;this._setState("connecting");setTimeout(function(){this.timeoutPending=false;this._internalConnect()}.bind(this),1e3)}}},{key:"_onSocketError",value:function _onSocketError(evt){this._internalDisconnect();this._internalReconnect()}},{key:"_onSocketOpen",value:function _onSocketOpen(){this._setState("connected")}},{key:"_onSocketClose",value:function _onSocketClose(){if(this._ws){this._setState("disconnected");delete this._ws}this._internalReconnect()}},{key:"_onSocketMessage",value:function _onSocketMessage(msg){msg=JSON.parse(msg.data);debug("RECV: %j",msg);if(msg.rid){var handlerInfo=this._pendingResponseHandlers[msg.rid];if(!handlerInfo){debug("ERROR: received response for unknown rid:",msg.rid);return}delete this._pendingResponseHandlers[msg.rid];if(msg.status>=200&&msg.status<300)handlerInfo.resolve(msg);else handlerInfo.reject(new Error(`${msg.status} - ${msg.statusDescription}`))}if(msg.epid&&msg.eventName){var ep=this._endPointEventHandlers[msg.epid];if(ep){ep._dispatchEventMessage(msg.eventName,msg.data)}else{debug(`ERROR: No event handler found for end point ${msg.epid}`)}}}},{key:"_registerEndPointEventHandler",value:function _registerEndPointEventHandler(epid,endPoint){this._endPointEventHandlers[epid]=endPoint}},{key:"_revokeEndPointEventHandler",value:function _revokeEndPointEventHandler(epid){delete this._endPointEventHandlers[epid]}},{key:"state",get:function get(){return this._state}}]);return Cantabile}(EventEmitter);var eventStateChanged="stateChanged";var eventConnected="connected";var eventConnecting="connecting";var eventDiconnected="disconnected";module.exports=Cantabile}).call(this,require("_process"))},{"./Application":3,"./Bindings":4,"./KeyRanges":7,"./SetList":8,"./ShowNotes":9,"./Song":10,"./SongStates":11,"./Transport":13,"./Variables":14,_process:2,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,debug:120,events:1,"isomorphic-ws":122}],6:[function(require,module,exports){"use strict";var _regenerator=require("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator");var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EventEmitter=require("events");function joinPath(a,b){while(a.endsWith("/")){a=a.substr(0,a.length-1)}while(b.startsWith("/")){b=b.substr(1)}return`${a}/${b}`}var EndPoint=function(_EventEmitter){(0,_inherits3.default)(EndPoint,_EventEmitter);function EndPoint(owner,endPoint){(0,_classCallCheck3.default)(this,EndPoint);var _this=(0,_possibleConstructorReturn3.default)(this,(EndPoint.__proto__||Object.getPrototypeOf(EndPoint)).call(this));_this.owner=owner;_this.endPoint=endPoint;_this.openCount=0;_this.owner.on("connected",_this._onConnected.bind(_this));_this.owner.on("disconnected",_this._onDisconnected.bind(_this));return _this}(0,_createClass3.default)(EndPoint,[{key:"open",value:function open(){this.openCount++;if(this.openCount==1&&this.owner.state=="connected"){this._onConnected()}}},{key:"close",value:function close(){this.openCount--;if(this.openCount>0)return;this.owner.send({method:"close",epid:this._epid});this.owner._revokeEndPointEventHandler(this._epid);this._onClose();delete this._epid;delete this._data}},{key:"send",value:function send(method,endPoint,data){if(this._epid){return this.owner.send({ep:endPoint,epid:this._epid,method:method,data:data})}else{return this.owner.send({ep:joinPath(this.endPoint,endPoint),method:method,data:data})}}},{key:"request",value:function request(method,endPoint,data){if(this._epid){return this.owner.request({ep:endPoint,epid:this._epid,method:method,data:data})}else{return this.owner.request({ep:joinPath(this.endPoint,endPoint),method:method,data:data})}}},{key:"post",value:function post(endPoint,data){return this.request("post",endPoint,data)}},{key:"untilOpen",value:function untilOpen(){var _this2=this;if(this.isOpen){return Promise.resolve()}else{return new Promise(function(resolve,reject){if(!_this2._pendingOpenPromises)_this2._pendingOpenPromises=[resolve];else _this2._pendingOpenPromises.push(resolve)})}}},{key:"_onConnected",value:function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(){var msg,i;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!(this.openCount==0)){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return this.owner.request({method:"open",ep:this.endPoint});case 5:msg=_context.sent;this._epid=msg.epid;this._data=msg.data;this.owner._registerEndPointEventHandler(this._epid,this);this._onOpen();if(this._pendingOpenPromises){for(i=0;i<this._pendingOpenPromises.length;i++){this._pendingOpenPromises[i]()}this._pendingOpenPromises=null}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](0);debug(_context.t0);throw _context.t0;case 17:case"end":return _context.stop()}}},_callee,this,[[0,13]])}));function _onConnected(){return _ref.apply(this,arguments)}return _onConnected}()},{key:"_onDisconnected",value:function _onDisconnected(){if(this._epid)this.owner._revokeEndPointEventHandler(this._epid);delete this._epid;delete this._data;this._onClose()}},{key:"_onOpen",value:function _onOpen(){}},{key:"_onClose",value:function _onClose(){}},{key:"_dispatchEventMessage",value:function _dispatchEventMessage(eventName,data){if(this["_onEvent_"+eventName]){this["_onEvent_"+eventName](data)}}},{key:"isOpen",get:function get(){return!!this._epid}}]);return EndPoint}(EventEmitter);module.exports=EndPoint},{"babel-runtime/helpers/asyncToGenerator":21,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":27,debug:120,events:1}],7:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EndPoint=require("./EndPoint");var KeyRanges=function(_EndPoint){(0,_inherits3.default)(KeyRanges,_EndPoint);function KeyRanges(owner){(0,_classCallCheck3.default)(this,KeyRanges);return(0,_possibleConstructorReturn3.default)(this,(KeyRanges.__proto__||Object.getPrototypeOf(KeyRanges)).call(this,owner,"/api/keyranges"))}(0,_createClass3.default)(KeyRanges,[{key:"_onOpen",value:function _onOpen(){this.emit("changed")}},{key:"_onClose",value:function _onClose(){this.emit("changed")}},{key:"_onEvent_keyRangesChanged",value:function _onEvent_keyRangesChanged(data){this._data=data;this.emit("changed")}},{key:"items",get:function get(){return this._data?this._data.items:null}}]);return KeyRanges}(EndPoint);module.exports=KeyRanges},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,debug:120}],8:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EndPoint=require("./EndPoint");var SetList=function(_EndPoint){(0,_inherits3.default)(SetList,_EndPoint);function SetList(owner){(0,_classCallCheck3.default)(this,SetList);var _this=(0,_possibleConstructorReturn3.default)(this,(SetList.__proto__||Object.getPrototypeOf(SetList)).call(this,owner,"/api/setlist"));_this._currentSong=null;return _this}(0,_createClass3.default)(SetList,[{key:"_onOpen",value:function _onOpen(){this._resolveCurrentSong();this.emit("reload");this.emit("changed");this.emit("preLoadedChanged")}},{key:"_onClose",value:function _onClose(){this._resolveCurrentSong();this.emit("reload");this.emit("changed");this.emit("preLoadedChanged")}},{key:"loadSongByIndex",value:function loadSongByIndex(index,delayed){this.post("/loadSongByIndex",{index:index,delayed:delayed})}},{key:"loadSongByProgram",value:function loadSongByProgram(pr,delayed){this.post("/loadSongByProgram",{pr:pr,delayed:delayed})}},{key:"loadFirstSong",value:function loadFirstSong(delayed){this.post("/loadFirstSong",{delayed:delayed})}},{key:"loadLastSong",value:function loadLastSong(delayed){this.post("/loadLastSong",{delayed:delayed})}},{key:"loadNextSong",value:function loadNextSong(direction,delayed,wrap){this.post("/loadNextSong",{direction:direction,delayed:delayed,wrap:wrap})}},{key:"_resolveCurrentSong",value:function _resolveCurrentSong(){if(this._data&&this._data.current>=0&&this._data.current<this._data.items.length){this._currentSong=this._data.items[this._data.current]}else{this._currentSong=null}}},{key:"_onEvent_setListChanged",value:function _onEvent_setListChanged(data){this._data=data;this._resolveCurrentSong();this.emit("reload");this.emit("changed");this.emit("preLoadedChanged")}},{key:"_onEvent_itemAdded",value:function _onEvent_itemAdded(data){this._data.items.splice(data.index,0,data.item);this.emit("itemAdded",data.index);this.emit("changed")}},{key:"_onEvent_itemRemoved",value:function _onEvent_itemRemoved(data){this._data.items.splice(data.index,1);this.emit("itemRemoved",data.index);this.emit("changed")}},{key:"_onEvent_itemMoved",value:function _onEvent_itemMoved(data){var item=this._data.items[data.from];this._data.items.splice(data.from,1);this._data.items.splice(data.to,0,item);this.emit("itemMoved",data.from,data.to);this.emit("changed")}},{key:"_onEvent_itemChanged",value:function _onEvent_itemChanged(data){if(this.currentSongIndex==data.index)this._currentSong=data.item;this._data.items.splice(data.index,1,data.item);this.emit("itemChanged",data.index);this.emit("changed")}},{key:"_onEvent_itemsReload",value:function _onEvent_itemsReload(data){this._data.items=data.items;this._data.current=data.current;this._resolveCurrentSong();this.emit("reload");this.emit("changed")}},{key:"_onEvent_preLoadedChanged",value:function _onEvent_preLoadedChanged(data){this._data.preLoaded=data.preLoaded;this.emit("preLoadedChanged")}},{key:"_onEvent_currentSongChanged",value:function _onEvent_currentSongChanged(data){this._data.current=data.current;this._resolveCurrentSong();this.emit("currentSongChanged")}},{key:"_onEvent_nameChanged",value:function _onEvent_nameChanged(data){if(this._data)this._data.name=data?data.name:null;this.emit("nameChanged");this.emit("changed")}},{key:"items",get:function get(){return this._data?this._data.items:null}},{key:"name",get:function get(){return this._data?this._data.name:null}},{key:"preLoaded",get:function get(){return this._data?this._data.preLoaded:false}},{key:"currentSongIndex",get:function get(){return this._data.items.indexOf(this._currentSong)}},{key:"currentSong",get:function get(){return this._currentSong}}]);return SetList}(EndPoint);module.exports=SetList},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,debug:120}],9:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EndPoint=require("./EndPoint");var ShowNotes=function(_EndPoint){(0,_inherits3.default)(ShowNotes,_EndPoint);function ShowNotes(owner){(0,_classCallCheck3.default)(this,ShowNotes);return(0,_possibleConstructorReturn3.default)(this,(ShowNotes.__proto__||Object.getPrototypeOf(ShowNotes)).call(this,owner,"/api/shownotes"))}(0,_createClass3.default)(ShowNotes,[{key:"_onOpen",value:function _onOpen(){this.emit("reload");this.emit("changed")}},{key:"_onClose",value:function _onClose(){this.emit("reload");this.emit("changed")}},{key:"_onEvent_itemAdded",value:function _onEvent_itemAdded(data){this._data.items.splice(data.index,0,data.item);this.emit("itemAdded",data.index);this.emit("changed")}},{key:"_onEvent_itemRemoved",value:function _onEvent_itemRemoved(data){this._data.items.splice(data.index,1);this.emit("itemRemoved",data.index);this.emit("changed")}},{key:"_onEvent_itemMoved",value:function _onEvent_itemMoved(data){var item=this._data.items[data.from];this._data.items.splice(data.from,1);this._data.items.splice(data.to,0,item);this.emit("itemMoved",data.from,data.to);this.emit("changed")}},{key:"_onEvent_itemChanged",value:function _onEvent_itemChanged(data){this._data.items.splice(data.index,1,data.item);this.emit("itemChanged",data.index);this.emit("changed")}},{key:"_onEvent_itemsReload",value:function _onEvent_itemsReload(data){this._data.items=data.items;this.emit("reload");this.emit("changed")}},{key:"items",get:function get(){return this._data?this._data.items:null}}]);return ShowNotes}(EndPoint);module.exports=ShowNotes},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,debug:120}],10:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EndPoint=require("./EndPoint");var SongStates=function(_EndPoint){(0,_inherits3.default)(SongStates,_EndPoint);function SongStates(owner){(0,_classCallCheck3.default)(this,SongStates);return(0,_possibleConstructorReturn3.default)(this,(SongStates.__proto__||Object.getPrototypeOf(SongStates)).call(this,owner,"/api/song"))}(0,_createClass3.default)(SongStates,[{key:"_onOpen",value:function _onOpen(){this.emit("changed");this.emit("nameChanged");this.emit("currentStateChanged")}},{key:"_onClose",value:function _onClose(){this.emit("changed");this.emit("nameChanged");this.emit("currentStateChanged")}},{key:"_onEvent_songChanged",value:function _onEvent_songChanged(data){this._data=data;this.emit("changed");this.emit("nameChanged");this.emit("currentStateChanged")}},{key:"_onEvent_nameChanged",value:function _onEvent_nameChanged(data){this._data.name=data.name;this.emit("changed");this.emit("nameChanged")}},{key:"_onEvent_currentStateChanged",value:function _onEvent_currentStateChanged(data){this._data.currentState=data.currentState;this.emit("changed");this.emit("currentStateChanged")}},{key:"name",get:function get(){return this._data?this._data.name:null}},{key:"currentState",get:function get(){return this._data?this._data.currentState:null}}]);return SongStates}(EndPoint);module.exports=SongStates},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25}],11:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var States=require("./States");var SongStates=function(_States){(0,_inherits3.default)(SongStates,_States);function SongStates(owner){(0,_classCallCheck3.default)(this,SongStates);return(0,_possibleConstructorReturn3.default)(this,(SongStates.__proto__||Object.getPrototypeOf(SongStates)).call(this,owner,"/api/songStates"))}return SongStates}(States);module.exports=SongStates},{"./States":12,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25}],12:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EndPoint=require("./EndPoint");var States=function(_EndPoint){(0,_inherits3.default)(States,_EndPoint);function States(owner,endPoint){(0,_classCallCheck3.default)(this,States);var _this=(0,_possibleConstructorReturn3.default)(this,(States.__proto__||Object.getPrototypeOf(States)).call(this,owner,endPoint));_this._currentState=null;return _this}(0,_createClass3.default)(States,[{key:"_onOpen",value:function _onOpen(){this._resolveCurrentState();this.emit("reload");this.emit("changed")}},{key:"_onClose",value:function _onClose(){this._resolveCurrentState();this.emit("reload");this.emit("changed")}},{key:"loadStateByIndex",value:function loadStateByIndex(index,delayed){this.post("/loadStateByIndex",{index:index,delayed:delayed})}},{key:"loadStateByProgram",value:function loadStateByProgram(pr,delayed){this.post("/loadStateByProgram",{pr:pr,delayed:delayed})}},{key:"loadFirstState",value:function loadFirstState(delayed){this.post("/loadFirstState",{delayed:delayed})}},{key:"loadLastState",value:function loadLastState(delayed){this.post("/loadLastState",{delayed:delayed})}},{key:"loadNextState",value:function loadNextState(direction,delayed,wrap){this.post("/loadNextState",{direction:direction,delayed:delayed,wrap:wrap})}},{key:"_resolveCurrentState",value:function _resolveCurrentState(){if(this._data&&this._data.current>=0&&this._data.current<this._data.items.length){this._currentState=this._data.items[this._data.current]}else{this._currentState=null}}},{key:"_onEvent_songChanged",value:function _onEvent_songChanged(data){this._data=data;this._resolveCurrentState();this.emit("reload");this.emit("changed")}},{key:"_onEvent_itemAdded",value:function _onEvent_itemAdded(data){this._data.items.splice(data.index,0,data.item);this.emit("itemAdded",data.index);this.emit("changed")}},{key:"_onEvent_itemRemoved",value:function _onEvent_itemRemoved(data){this._data.items.splice(data.index,1);this.emit("itemRemoved",data.index);this.emit("changed")}},{key:"_onEvent_itemMoved",value:function _onEvent_itemMoved(data){var item=this._data.items[data.from];this._data.items.splice(data.from,1);this._data.items.splice(data.to,0,item);this.emit("itemMoved",data.from,data.to);this.emit("changed")}},{key:"_onEvent_itemChanged",value:function _onEvent_itemChanged(data){if(this.currentStateIndex==data.index)this._currentState=data.item;this._data.items.splice(data.index,1,data.item);this.emit("itemChanged",data.index);this.emit("changed")}},{key:"_onEvent_itemsReload",value:function _onEvent_itemsReload(data){this._data.items=data.items;this._data.current=data.current;this._resolveCurrentState();this.emit("reload");this.emit("changed")}},{key:"_onEvent_currentStateChanged",value:function _onEvent_currentStateChanged(data){this._data.current=data.current;this._resolveCurrentState();this.emit("currentStateChanged")}},{key:"_onEvent_nameChanged",value:function _onEvent_nameChanged(data){if(this._data)this._data.name=data?data.name:null;this.emit("nameChanged");this.emit("changed")}},{key:"items",get:function get(){return this._data?this._data.items:null}},{key:"name",get:function get(){return this._data?this._data.name:null}},{key:"currentStateIndex",get:function get(){return this._data.items.indexOf(this._currentState)}},{key:"currentState",get:function get(){return this._currentState}}]);return States}(EndPoint);module.exports=States},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,debug:120}],13:[function(require,module,exports){"use strict";var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EndPoint=require("./EndPoint");var Transport=function(_EndPoint){(0,_inherits3.default)(Transport,_EndPoint);function Transport(owner){(0,_classCallCheck3.default)(this,Transport);return(0,_possibleConstructorReturn3.default)(this,(Transport.__proto__||Object.getPrototypeOf(Transport)).call(this,owner,"/api/transport"))}(0,_createClass3.default)(Transport,[{key:"_onOpen",value:function _onOpen(){this.emit("stateChanged");this.emit("timeSignatureChanged");this.emit("tempoChanged")}},{key:"_onClose",value:function _onClose(){this.emit("stateChanged");this.emit("timeSignatureChanged");this.emit("tempoChanged")}},{key:"_onEvent_stateChanged",value:function _onEvent_stateChanged(data){this._data.state=data.state;this.emit("stateChanged")}},{key:"_onEvent_timeSigChanged",value:function _onEvent_timeSigChanged(data){this._data.timeSigNum=data.timeSigNum;this._data.timeSigDen=data.timeSigDen;this.emit("timeSignatureChanged")}},{key:"_onEvent_tempoChanged",value:function _onEvent_tempoChanged(data){this._data.tempo=data.tempo;this.emit("tempoChanged")}},{key:"play",value:function play(){if(this.state!="playing")this.post("/play",{})}},{key:"togglePlayPause",value:function togglePlayPause(){if(this.state=="playing")this.pause();else this.play()}},{key:"togglePause",value:function togglePause(){if(this.state=="paused")this.play();else if(this.state=="playing")this.pause()}},{key:"togglePlay",value:function togglePlay(){if(this.state=="stopped")this.play();else this.stop()}},{key:"togglePlayStop",value:function togglePlayStop(){if(this.state!="playing")this.play();else this.stop()}},{key:"pause",value:function pause(){if(this.state!="paused")this.post("/pause",{})}},{key:"stop",value:function stop(){if(this.state!="stopped")this.post("/stop",{})}},{key:"state",get:function get(){return this._data?this._data.state:"stopped"},set:function set(value){if(this.state==value)return;switch(value){case"playing":this.play();break;case"paused":this.pause();break;case"stopped":this.stop();break}}},{key:"timeSignatureNum",get:function get(){return this._data?this._data.timeSigNum:0}},{key:"timeSignatureDen",get:function get(){return this._data?this._data.timeSigDen:0}},{key:"timeSignature",get:function get(){return this._data?this._data.timeSigNum+"/"+this._data.timeSigDen:"-"}},{key:"tempo",get:function get(){return this._data?this._data.tempo:0}}]);return Transport}(EndPoint);module.exports=Transport},{"./EndPoint":6,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25}],14:[function(require,module,exports){"use strict";var _regenerator=require("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator");var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=require("debug")("Cantabile");var EndPoint=require("./EndPoint");var EventEmitter=require("events");var PatternWatcher=function(_EventEmitter){(0,_inherits3.default)(PatternWatcher,_EventEmitter);function PatternWatcher(owner,pattern,listener){(0,_classCallCheck3.default)(this,PatternWatcher);var _this=(0,_possibleConstructorReturn3.default)(this,(PatternWatcher.__proto__||Object.getPrototypeOf(PatternWatcher)).call(this));_this.owner=owner;_this._pattern=pattern;_this._patternId=0;_this._resolved="";_this._listener=listener;return _this}(0,_createClass3.default)(PatternWatcher,[{key:"_start",value:function _start(){var _this2=this;this.owner.post("/watch",{pattern:this._pattern}).then(function(r){if(r.data.patternId){_this2.owner._registerPatternId(r.data.patternId,_this2);_this2._patternId=r.data.patternId}_this2._resolved=r.data.resolved;_this2._fireChanged()})}},{key:"_stop",value:function _stop(){if(this.owner._epid&&this._patternId){this.owner.send("/unwatch",{patternId:this._patternId});this.owner._revokePatternId(this._patternId);this._patternId=0;this.resolved="";this._fireChanged()}}},{key:"unwatch",value:function unwatch(){this._stop();this.owner._revokeWatcher(this)}},{key:"_update",value:function _update(data){this._resolved=data.resolved;this._fireChanged()}},{key:"_fireChanged",value:function _fireChanged(){if(this._listener)this._listener(this.resolved,this);this.emit("changed",this.resolved,this)}},{key:"pattern",get:function get(){return this._pattern}},{key:"resolved",get:function get(){return this._resolved}}]);return PatternWatcher}(EventEmitter);var Variables=function(_EndPoint){(0,_inherits3.default)(Variables,_EndPoint);function Variables(owner){(0,_classCallCheck3.default)(this,Variables);var _this3=(0,_possibleConstructorReturn3.default)(this,(Variables.__proto__||Object.getPrototypeOf(Variables)).call(this,owner,"/api/variables"));_this3.watchers=[];_this3.patternIds={};return _this3}(0,_createClass3.default)(Variables,[{key:"resolve",value:function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(pattern){return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.owner.untilConnected();case 2:_context.next=4;return this.post("/resolve",{pattern:pattern});case 4:return _context.abrupt("return",_context.sent.data.resolved);case 5:case"end":return _context.stop()}}},_callee,this)}));function resolve(_x){return _ref.apply(this,arguments)}return resolve}()},{key:"_onOpen",value:function _onOpen(){for(var i=0;i<this.watchers.length;i++){this.watchers[i]._start()}}},{key:"_onClose",value:function _onClose(){for(var i=0;i<this.watchers.length;i++){this.watchers[i]._stop()}}},{key:"watch",value:function watch(pattern,listener){var w=new PatternWatcher(this,pattern,listener);this.watchers.push(w);if(this.isOpen)w._start()}},{key:"_registerPatternId",value:function _registerPatternId(patternId,watcher){this.patternIds[patternId]=watcher}},{key:"_revokePatternId",value:function _revokePatternId(patternId){delete this.patternIds[patternId]}},{key:"_revokeWatcher",value:function _revokeWatcher(w){this.watchers=this.watchers.filter(function(x){return x!=w})}},{key:"_onEvent_patternChanged",value:function _onEvent_patternChanged(data){var w=this.patternIds[data.patternId];if(w){w._update(data)}}}]);return Variables}(EndPoint);module.exports=Variables},{"./EndPoint":6,"babel-runtime/helpers/asyncToGenerator":21,"babel-runtime/helpers/classCallCheck":22,"babel-runtime/helpers/createClass":23,"babel-runtime/helpers/inherits":24,"babel-runtime/helpers/possibleConstructorReturn":25,"babel-runtime/regenerator":27,debug:120,events:1}],15:[function(require,module,exports){module.exports={default:require("core-js/library/fn/object/create"),__esModule:true}},{"core-js/library/fn/object/create":28}],16:[function(require,module,exports){module.exports={default:require("core-js/library/fn/object/define-property"),__esModule:true}},{"core-js/library/fn/object/define-property":29}],17:[function(require,module,exports){module.exports={default:require("core-js/library/fn/object/set-prototype-of"),__esModule:true}},{"core-js/library/fn/object/set-prototype-of":30}],18:[function(require,module,exports){module.exports={default:require("core-js/library/fn/promise"),__esModule:true}},{"core-js/library/fn/promise":31}],19:[function(require,module,exports){module.exports={default:require("core-js/library/fn/symbol"),__esModule:true}},{"core-js/library/fn/symbol":32}],20:[function(require,module,exports){module.exports={default:require("core-js/library/fn/symbol/iterator"),__esModule:true}},{"core-js/library/fn/symbol/iterator":33}],21:[function(require,module,exports){"use strict";exports.__esModule=true;var _promise=require("../core-js/promise");var _promise2=_interopRequireDefault(_promise);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return _promise2.default.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},{"../core-js/promise":18}],22:[function(require,module,exports){"use strict";exports.__esModule=true;exports.default=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}},{}],23:[function(require,module,exports){"use strict";exports.__esModule=true;var _defineProperty=require("../core-js/object/define-property");var _defineProperty2=_interopRequireDefault(_defineProperty);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;(0,_defineProperty2.default)(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}()},{"../core-js/object/define-property":16}],24:[function(require,module,exports){"use strict";exports.__esModule=true;var _setPrototypeOf=require("../core-js/object/set-prototype-of");var _setPrototypeOf2=_interopRequireDefault(_setPrototypeOf);var _create=require("../core-js/object/create");var _create2=_interopRequireDefault(_create);var _typeof2=require("../helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":(0,_typeof3.default)(superClass)))}subClass.prototype=(0,_create2.default)(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(subClass,superClass):subClass.__proto__=superClass}},{"../core-js/object/create":15,"../core-js/object/set-prototype-of":17,"../helpers/typeof":26}],25:[function(require,module,exports){"use strict";exports.__esModule=true;var _typeof2=require("../helpers/typeof");var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":(0,_typeof3.default)(call))==="object"||typeof call==="function")?call:self}},{"../helpers/typeof":26}],26:[function(require,module,exports){"use strict";exports.__esModule=true;var _iterator=require("../core-js/symbol/iterator");var _iterator2=_interopRequireDefault(_iterator);var _symbol=require("../core-js/symbol");var _symbol2=_interopRequireDefault(_symbol);var _typeof=typeof _symbol2.default==="function"&&typeof _iterator2.default==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof _symbol2.default==="function"&&obj.constructor===_symbol2.default&&obj!==_symbol2.default.prototype?"symbol":typeof obj};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=typeof _symbol2.default==="function"&&_typeof(_iterator2.default)==="symbol"?function(obj){return typeof obj==="undefined"?"undefined":_typeof(obj)}:function(obj){return obj&&typeof _symbol2.default==="function"&&obj.constructor===_symbol2.default&&obj!==_symbol2.default.prototype?"symbol":typeof obj==="undefined"?"undefined":_typeof(obj)}},{"../core-js/symbol":19,"../core-js/symbol/iterator":20}],27:[function(require,module,exports){module.exports=require("regenerator-runtime")},{"regenerator-runtime":124}],28:[function(require,module,exports){require("../../modules/es6.object.create");var $Object=require("../../modules/_core").Object;module.exports=function create(P,D){return $Object.create(P,D)}},{"../../modules/_core":41,"../../modules/es6.object.create":108}],29:[function(require,module,exports){require("../../modules/es6.object.define-property");var $Object=require("../../modules/_core").Object;module.exports=function defineProperty(it,key,desc){return $Object.defineProperty(it,key,desc)}},{"../../modules/_core":41,"../../modules/es6.object.define-property":109}],30:[function(require,module,exports){require("../../modules/es6.object.set-prototype-of");module.exports=require("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":41,"../../modules/es6.object.set-prototype-of":110}],31:[function(require,module,exports){require("../modules/es6.object.to-string");require("../modules/es6.string.iterator");require("../modules/web.dom.iterable");require("../modules/es6.promise");require("../modules/es7.promise.finally");require("../modules/es7.promise.try");module.exports=require("../modules/_core").Promise},{"../modules/_core":41,"../modules/es6.object.to-string":111,"../modules/es6.promise":112,"../modules/es6.string.iterator":113,"../modules/es7.promise.finally":115,"../modules/es7.promise.try":116,"../modules/web.dom.iterable":119}],32:[function(require,module,exports){require("../../modules/es6.symbol");require("../../modules/es6.object.to-string");require("../../modules/es7.symbol.async-iterator");require("../../modules/es7.symbol.observable");module.exports=require("../../modules/_core").Symbol},{"../../modules/_core":41,"../../modules/es6.object.to-string":111,"../../modules/es6.symbol":114,"../../modules/es7.symbol.async-iterator":117,"../../modules/es7.symbol.observable":118}],33:[function(require,module,exports){require("../../modules/es6.string.iterator");require("../../modules/web.dom.iterable");module.exports=require("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":104,"../../modules/es6.string.iterator":113,"../../modules/web.dom.iterable":119}],34:[function(require,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],35:[function(require,module,exports){module.exports=function(){}},{}],36:[function(require,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it}},{}],37:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":60}],38:[function(require,module,exports){var toIObject=require("./_to-iobject");var toLength=require("./_to-length");var toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},{"./_to-absolute-index":95,"./_to-iobject":97,"./_to-length":98}],39:[function(require,module,exports){var cof=require("./_cof");var TAG=require("./_wks")("toStringTag");var ARG=cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},{"./_cof":40,"./_wks":105}],40:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],41:[function(require,module,exports){var core=module.exports={version:"2.5.7"};if(typeof __e=="number")__e=core},{}],42:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":34}],43:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],44:[function(require,module,exports){module.exports=!require("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./_fails":49}],45:[function(require,module,exports){var isObject=require("./_is-object");var document=require("./_global").document;var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":51,"./_is-object":60}],46:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],47:[function(require,module,exports){var getKeys=require("./_object-keys");var gOPS=require("./_object-gops");var pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},{"./_object-gops":77,"./_object-keys":80,"./_object-pie":81}],48:[function(require,module,exports){var global=require("./_global");var core=require("./_core");var ctx=require("./_ctx");var hide=require("./_hide");var has=require("./_has");var PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var IS_WRAP=type&$export.W;var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE];var target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];var key,own,out;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;if(own&&has(exports,key))continue;out=own?target[key]:source[key];exports[key]=IS_GLOBAL&&typeof target[key]!="function"?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};F[PROTOTYPE]=C[PROTOTYPE];return F}(out):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(IS_PROTO){(exports.virtual||(exports.virtual={}))[key]=out;if(type&$export.R&&expProto&&!expProto[key])hide(expProto,key,out)}}};$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},{"./_core":41,"./_ctx":42,"./_global":51,"./_has":52,"./_hide":53}],49:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],50:[function(require,module,exports){var ctx=require("./_ctx");var call=require("./_iter-call");var isArrayIter=require("./_is-array-iter");var anObject=require("./_an-object");var toLength=require("./_to-length");var getIterFn=require("./core.get-iterator-method");var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable);var f=ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN},{"./_an-object":37,"./_ctx":42,"./_is-array-iter":58,"./_iter-call":61,"./_to-length":98,"./core.get-iterator-method":106}],51:[function(require,module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],52:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],53:[function(require,module,exports){var dP=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},{"./_descriptors":44,"./_object-dp":72,"./_property-desc":84}],54:[function(require,module,exports){var document=require("./_global").document;module.exports=document&&document.documentElement},{"./_global":51}],55:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},{"./_descriptors":44,"./_dom-create":45,"./_fails":49}],56:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],57:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./_cof":40}],58:[function(require,module,exports){var Iterators=require("./_iterators");var ITERATOR=require("./_wks")("iterator");var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":66,"./_wks":105}],59:[function(require,module,exports){var cof=require("./_cof");module.exports=Array.isArray||function isArray(arg){return cof(arg)=="Array"}},{"./_cof":40}],60:[function(require,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],61:[function(require,module,exports){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},{"./_an-object":37}],62:[function(require,module,exports){"use strict";var create=require("./_object-create");var descriptor=require("./_property-desc");var setToStringTag=require("./_set-to-string-tag");var IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":53,"./_object-create":71,"./_property-desc":84,"./_set-to-string-tag":89,"./_wks":105}],63:[function(require,module,exports){"use strict";var LIBRARY=require("./_library");var $export=require("./_export");var redefine=require("./_redefine");var hide=require("./_hide");var Iterators=require("./_iterators");var $iterCreate=require("./_iter-create");var setToStringTag=require("./_set-to-string-tag");var getPrototypeOf=require("./_object-gpo");var ITERATOR=require("./_wks")("iterator");var BUGGY=!([].keys&&"next"in[].keys());var FF_ITERATOR="@@iterator";var KEYS="keys";var VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator";var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined;var $anyNative=NAME=="Array"?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&typeof IteratorPrototype[ITERATOR]!="function")hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},{"./_export":48,"./_hide":53,"./_iter-create":62,"./_iterators":66,"./_library":67,"./_object-gpo":78,"./_redefine":86,"./_set-to-string-tag":89,"./_wks":105}],64:[function(require,module,exports){var ITERATOR=require("./_wks")("iterator");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./_wks":105}],65:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],66:[function(require,module,exports){module.exports={}},{}],67:[function(require,module,exports){module.exports=true},{}],68:[function(require,module,exports){var META=require("./_uid")("meta");var isObject=require("./_is-object");var has=require("./_has");var setDesc=require("./_object-dp").f;var id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))});var setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},{"./_fails":49,"./_has":52,"./_is-object":60,"./_object-dp":72,"./_uid":101}],69:[function(require,module,exports){var global=require("./_global");var macrotask=require("./_task").set;var Observer=global.MutationObserver||global.WebKitMutationObserver;var process=global.process;var Promise=global.Promise;var isNode=require("./_cof")(process)=="process";module.exports=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer&&!(global.navigator&&global.navigator.standalone)){var toggle=true;var node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve(undefined);notify=function(){promise.then(flush)}}else{notify=function(){macrotask.call(global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}}},{"./_cof":40,"./_global":51,"./_task":94}],70:[function(require,module,exports){"use strict";var aFunction=require("./_a-function");function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=aFunction(resolve);this.reject=aFunction(reject)}module.exports.f=function(C){return new PromiseCapability(C)}},{"./_a-function":34}],71:[function(require,module,exports){var anObject=require("./_an-object");var dPs=require("./_object-dps");var enumBugKeys=require("./_enum-bug-keys");var IE_PROTO=require("./_shared-key")("IE_PROTO");var Empty=function(){};var PROTOTYPE="prototype";var createDict=function(){var iframe=require("./_dom-create")("iframe");var i=enumBugKeys.length;var lt="<";var gt=">";var iframeDocument;iframe.style.display="none";require("./_html").appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},{"./_an-object":37,"./_dom-create":45,"./_enum-bug-keys":46,"./_html":54,"./_object-dps":73,"./_shared-key":90}],72:[function(require,module,exports){var anObject=require("./_an-object");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var toPrimitive=require("./_to-primitive");var dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O}},{"./_an-object":37,"./_descriptors":44,"./_ie8-dom-define":55,"./_to-primitive":100}],73:[function(require,module,exports){var dP=require("./_object-dp");var anObject=require("./_an-object");var getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":37,"./_descriptors":44,"./_object-dp":72,"./_object-keys":80}],74:[function(require,module,exports){var pIE=require("./_object-pie");var createDesc=require("./_property-desc");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var has=require("./_has");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{"./_descriptors":44,"./_has":52,"./_ie8-dom-define":55,"./_object-pie":81,"./_property-desc":84,"./_to-iobject":97,"./_to-primitive":100}],75:[function(require,module,exports){var toIObject=require("./_to-iobject");var gOPN=require("./_object-gopn").f;var toString={}.toString;var windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=="[object Window]"?getWindowNames(it):gOPN(toIObject(it))}},{"./_object-gopn":76,"./_to-iobject":97}],76:[function(require,module,exports){var $keys=require("./_object-keys-internal");var hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":46,"./_object-keys-internal":79}],77:[function(require,module,exports){exports.f=Object.getOwnPropertySymbols},{}],78:[function(require,module,exports){var has=require("./_has");var toObject=require("./_to-object");var IE_PROTO=require("./_shared-key")("IE_PROTO");var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},{"./_has":52,"./_shared-key":90,"./_to-object":99}],79:[function(require,module,exports){var has=require("./_has");var toIObject=require("./_to-iobject");var arrayIndexOf=require("./_array-includes")(false);var IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},{"./_array-includes":38,"./_has":52,"./_shared-key":90,"./_to-iobject":97}],80:[function(require,module,exports){var $keys=require("./_object-keys-internal");var enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":46,"./_object-keys-internal":79}],81:[function(require,module,exports){exports.f={}.propertyIsEnumerable},{}],82:[function(require,module,exports){module.exports=function(exec){try{return{e:false,v:exec()}}catch(e){return{e:true,v:e}}}},{}],83:[function(require,module,exports){var anObject=require("./_an-object");var isObject=require("./_is-object");var newPromiseCapability=require("./_new-promise-capability");module.exports=function(C,x){anObject(C);if(isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise}},{"./_an-object":37,"./_is-object":60,"./_new-promise-capability":70}],84:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},{}],85:[function(require,module,exports){var hide=require("./_hide");module.exports=function(target,src,safe){for(var key in src){if(safe&&target[key])target[key]=src[key];else hide(target,key,src[key])}return target}},{"./_hide":53}],86:[function(require,module,exports){module.exports=require("./_hide")},{"./_hide":53}],87:[function(require,module,exports){var isObject=require("./_is-object");var anObject=require("./_an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./_an-object":37,"./_ctx":42,"./_is-object":60,"./_object-gopd":74}],88:[function(require,module,exports){"use strict";var global=require("./_global");var core=require("./_core");var dP=require("./_object-dp");var DESCRIPTORS=require("./_descriptors");var SPECIES=require("./_wks")("species");module.exports=function(KEY){var C=typeof core[KEY]=="function"?core[KEY]:global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this}})}},{"./_core":41,"./_descriptors":44,"./_global":51,"./_object-dp":72,"./_wks":105}],89:[function(require,module,exports){var def=require("./_object-dp").f;var has=require("./_has");var TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},{"./_has":52,"./_object-dp":72,"./_wks":105}],90:[function(require,module,exports){var shared=require("./_shared")("keys");var uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":91,"./_uid":101}],91:[function(require,module,exports){var core=require("./_core");var global=require("./_global");var SHARED="__core-js_shared__";var store=global[SHARED]||(global[SHARED]={});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{})})("versions",[]).push({version:core.version,mode:require("./_library")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},{"./_core":41,"./_global":51,"./_library":67}],92:[function(require,module,exports){var anObject=require("./_an-object");var aFunction=require("./_a-function");var SPECIES=require("./_wks")("species");module.exports=function(O,D){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./_a-function":34,"./_an-object":37,"./_wks":105}],93:[function(require,module,exports){var toInteger=require("./_to-integer");var defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./_defined":43,"./_to-integer":96}],94:[function(require,module,exports){var ctx=require("./_ctx");var invoke=require("./_invoke");var html=require("./_html");var cel=require("./_dom-create");var global=require("./_global");var process=global.process;var setTask=global.setImmediate;var clearTask=global.clearImmediate;var MessageChannel=global.MessageChannel;var Dispatch=global.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE="onreadystatechange";var defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(require("./_cof")(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage=="function"&&!global.importScripts){defer=function(id){global.postMessage(id+"","*")};global.addEventListener("message",listener,false)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./_cof":40,"./_ctx":42,"./_dom-create":45,"./_global":51,"./_html":54,"./_invoke":56}],95:[function(require,module,exports){var toInteger=require("./_to-integer");var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},{"./_to-integer":96}],96:[function(require,module,exports){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],97:[function(require,module,exports){var IObject=require("./_iobject");var defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":43,"./_iobject":57}],98:[function(require,module,exports){var toInteger=require("./_to-integer");var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":96}],99:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":43}],100:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":60}],101:[function(require,module,exports){var id=0;var px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],102:[function(require,module,exports){var global=require("./_global");var navigator=global.navigator;module.exports=navigator&&navigator.userAgent||""},{"./_global":51}],103:[function(require,module,exports){var global=require("./_global");var core=require("./_core");var LIBRARY=require("./_library");var wksExt=require("./_wks-ext");var defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},{"./_core":41,"./_global":51,"./_library":67,"./_object-dp":72,"./_wks-ext":104}],104:[function(require,module,exports){exports.f=require("./_wks")},{"./_wks":105}],105:[function(require,module,exports){var store=require("./_shared")("wks");var uid=require("./_uid");var Symbol=require("./_global").Symbol;var USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},{"./_global":51,"./_shared":91,"./_uid":101}],106:[function(require,module,exports){var classof=require("./_classof");var ITERATOR=require("./_wks")("iterator");var Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./_classof":39,"./_core":41,"./_iterators":66,"./_wks":105}],107:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables");var step=require("./_iter-step");var Iterators=require("./_iterators");var toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},{"./_add-to-unscopables":35,"./_iter-define":63,"./_iter-step":65,"./_iterators":66,"./_to-iobject":97}],108:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},{"./_export":48,"./_object-create":71}],109:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f})},{"./_descriptors":44,"./_export":48,"./_object-dp":72}],110:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set})},{"./_export":48,"./_set-proto":87}],111:[function(require,module,exports){},{}],112:[function(require,module,exports){"use strict";var LIBRARY=require("./_library");var global=require("./_global");var ctx=require("./_ctx");var classof=require("./_classof");var $export=require("./_export");var isObject=require("./_is-object");var aFunction=require("./_a-function");var anInstance=require("./_an-instance");var forOf=require("./_for-of");var speciesConstructor=require("./_species-constructor");var task=require("./_task").set;var microtask=require("./_microtask")();var newPromiseCapabilityModule=require("./_new-promise-capability");var perform=require("./_perform");var userAgent=require("./_user-agent");var promiseResolve=require("./_promise-resolve");var PROMISE="Promise";var TypeError=global.TypeError;var process=global.process;var versions=process&&process.versions;var v8=versions&&versions.v8||"";var $Promise=global[PROMISE];var isNode=classof(process)=="process";var empty=function(){};var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper;var newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1);var FakePromise=(promise.constructor={})[require("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent=="function")&&promise.then(empty)instanceof FakePromise&&v8.indexOf("6.6")!==0&&userAgent.indexOf("Chrome/66")===-1}catch(e){}}();var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=="function"?then:false};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v;var ok=promise._s==1;var i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain){domain.exit();exited=true}}if(result===reaction.promise){reject(TypeError("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){if(domain&&!exited)domain.exit();reject(e)}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)})};var onUnhandled=function(promise){task.call(global,function(){var value=promise._v;var unhandled=isUnhandled(promise);var result,handler,console;if(unhandled){result=perform(function(){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error("Unhandled promise rejection",value)}});promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(unhandled&&result.e)throw result.v})};var isUnhandled=function(promise){return promise._h!==1&&(promise._a||promise._c).length===0};var onHandleUnhandled=function(promise){task.call(global,function(){var handler;if(isNode){process.emit("rejectionHandled",promise)}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v})}})};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function(value){var promise=this;var then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE){$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,"_h");aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=require("./_redefine-all")($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},catch:function(onRejected){return this.then(undefined,onRejected)}});OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1)};newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise});require("./_set-to-string-tag")($Promise,PROMISE);require("./_set-species")(PROMISE);Wrapper=require("./_core")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this);var $$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function resolve(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}});$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function all(iterable){var C=this;var capability=newPromiseCapability(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var values=[];var index=0;var remaining=1;forOf(iterable,false,function(promise){var $index=index++;var alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)},reject)});--remaining||resolve(values)});if(result.e)reject(result.v);return capability.promise},race:function race(iterable){var C=this;var capability=newPromiseCapability(C);var reject=capability.reject;var result=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(result.e)reject(result.v);return capability.promise}})},{"./_a-function":34,"./_an-instance":36,"./_classof":39,"./_core":41,"./_ctx":42,"./_export":48,"./_for-of":50,"./_global":51,"./_is-object":60,"./_iter-detect":64,"./_library":67,"./_microtask":69,"./_new-promise-capability":70,"./_perform":82,"./_promise-resolve":83,"./_redefine-all":85,"./_set-species":88,"./_set-to-string-tag":89,"./_species-constructor":92,"./_task":94,"./_user-agent":102,"./_wks":105}],113:[function(require,module,exports){"use strict";var $at=require("./_string-at")(true);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},{"./_iter-define":63,"./_string-at":93}],114:[function(require,module,exports){"use strict";var global=require("./_global");var has=require("./_has");var DESCRIPTORS=require("./_descriptors");var $export=require("./_export");var redefine=require("./_redefine");var META=require("./_meta").KEY;var $fails=require("./_fails");var shared=require("./_shared");var setToStringTag=require("./_set-to-string-tag");var uid=require("./_uid");var wks=require("./_wks");var wksExt=require("./_wks-ext");var wksDefine=require("./_wks-define");var enumKeys=require("./_enum-keys");var isArray=require("./_is-array");var anObject=require("./_an-object");var isObject=require("./_is-object");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var createDesc=require("./_property-desc");var _create=require("./_object-create");var gOPNExt=require("./_object-gopn-ext");var $GOPD=require("./_object-gopd");var $DP=require("./_object-dp");var $keys=require("./_object-keys");var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE="prototype";var HIDDEN=wks("_hidden");var TO_PRIMITIVE=wks("toPrimitive");var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared("symbol-registry");var AllSymbols=shared("symbols");var OPSymbols=shared("op-symbols");var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=="function";var QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(it){return typeof it=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],"toString",function toString(){return this._k});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames;require("./_object-pie").f=$propertyIsEnumerable;require("./_object-gops").f=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./_library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"})),"JSON",{stringify:function stringify(it){var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);$replacer=replacer=args[1];if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer=="function")value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},{"./_an-object":37,"./_descriptors":44,"./_enum-keys":47,"./_export":48,"./_fails":49,"./_global":51,"./_has":52,"./_hide":53,"./_is-array":59,"./_is-object":60,"./_library":67,"./_meta":68,"./_object-create":71,"./_object-dp":72,"./_object-gopd":74,"./_object-gopn":76,"./_object-gopn-ext":75,"./_object-gops":77,"./_object-keys":80,"./_object-pie":81,"./_property-desc":84,"./_redefine":86,"./_set-to-string-tag":89,"./_shared":91,"./_to-iobject":97,"./_to-primitive":100,"./_uid":101,"./_wks":105,"./_wks-define":103,"./_wks-ext":104}],115:[function(require,module,exports){"use strict";var $export=require("./_export");var core=require("./_core");var global=require("./_global");var speciesConstructor=require("./_species-constructor");var promiseResolve=require("./_promise-resolve");$export($export.P+$export.R,"Promise",{finally:function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise);var isFunction=typeof onFinally=="function";return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}})},{"./_core":41,"./_export":48,"./_global":51,"./_promise-resolve":83,"./_species-constructor":92}],116:[function(require,module,exports){"use strict";var $export=require("./_export");var newPromiseCapability=require("./_new-promise-capability");var perform=require("./_perform");$export($export.S,"Promise",{try:function(callbackfn){var promiseCapability=newPromiseCapability.f(this);var result=perform(callbackfn);(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v);return promiseCapability.promise}})},{"./_export":48,"./_new-promise-capability":70,"./_perform":82}],117:[function(require,module,exports){require("./_wks-define")("asyncIterator")},{"./_wks-define":103}],118:[function(require,module,exports){require("./_wks-define")("observable")},{"./_wks-define":103}],119:[function(require,module,exports){require("./es6.array.iterator");var global=require("./_global");var hide=require("./_hide");var Iterators=require("./_iterators");var TO_STRING_TAG=require("./_wks")("toStringTag");var DOMIterables=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i];var Collection=global[NAME];var proto=Collection&&Collection.prototype;if(proto&&!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=Iterators.Array}},{"./_global":51,"./_hide":53,"./_iterators":66,"./_wks":105,"./es6.array.iterator":107}],120:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":121,_process:2}],121:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.instances=[];exports.names=[];exports.skips=[];exports.formatters={};function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;if("function"===typeof exports.init){exports.init(debug)}exports.instances.push(debug);return debug}function destroy(){var index=exports.instances.indexOf(this);if(index!==-1){exports.instances.splice(index,1);return true}else{return false}}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var i;var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}for(i=0;i<exports.instances.length;i++){var instance=exports.instances[i];instance.enabled=exports.enabled(instance.namespace)}}function disable(){exports.enable("")}function enabled(name){if(name[name.length-1]==="*"){return true}var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:123}],122:[function(require,module,exports){(function(global){var ws=null;if(typeof WebSocket!=="undefined"){ws=WebSocket}else if(typeof MozWebSocket!=="undefined"){ws=MozWebSocket}else if(typeof global!=="undefined"){ws=global.WebSocket||global.MozWebSocket}else if(typeof window!=="undefined"){ws=window.WebSocket||window.MozWebSocket}else if(typeof self!=="undefined"){ws=self.WebSocket||self.MozWebSocket}module.exports=ws}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],123:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],124:[function(require,module,exports){var g=function(){return this}()||Function("return this")();var hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0;var oldRuntime=hadRuntime&&g.regeneratorRuntime;g.regeneratorRuntime=undefined;module.exports=require("./runtime");if(hadRuntime){g.regeneratorRuntime=oldRuntime}else{try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=undefined}}},{"./runtime":125}],125:[function(require,module,exports){!function(global){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction"}}genFun.prototype=Object.create(Gp);return genFun};runtime.awrap=function(arg){return{__await:arg}};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value&&typeof value==="object"&&hasOwn.call(value,"__await")){return Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)})}return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result)},reject)}}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this};runtime.AsyncIterator=AsyncIterator;runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){if(method==="throw"){throw arg}return doneResult()}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if(context.method==="next"){context.sent=context._sent=context.arg}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg}context.dispatchException(context.arg)}else if(context.method==="return"){context.abrupt("return",context.arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue}return{value:record.arg,done:context.done}}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg}}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator.return){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel}}context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel}var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined}}else{return info}context.delegate=null;return ContinueSentinel}defineIteratorMethods(Gp);Gp[toStringTagSymbol]="Generator";Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined}return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel}return this.complete(record)},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined}return ContinueSentinel}}}(function(){return this}()||Function("return this")())},{}]},{},[5])(5)});